


@* in the page create-user.cshtml *@
@* missing the product *@


@{        
    // Check if the active users exceed the limit
    var activeUsersCount = db.uQeryValue<int>(
        "SELECT COUNT(*) FROM logins WHERE lCustomerId = @0 AND lStatusId = @1", 
        currentCustomerId, 
        1
    );

    if (activeUsersCount >= 20)
    {
        ModelState.AddFormError("User limit exceeded. Cannot create more than 20 active users.");
    }
}
